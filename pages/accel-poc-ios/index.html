<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <script>
      let currentColumn = 2;

function getMotionPermissions(){
    alert("getPermission invoked");
    DeviceMotionEvent.requestPermission().then(response => {
        alert(`Response: ${response}`);
        if (response == 'granted') {
          
          window.addEventListener('deviceorientation',(event) => {
            alpha = event.alpha;
            beta = event.beta;
            gamma = event.gamma;

            document.getElementById("alpha").textContent = `${alpha.toFixed(2)}`
            document.getElementById("beta").textContent = `${beta.toFixed(2)}`
            document.getElementById("gamma").textContent = `${gamma.toFixed(2)}`

            if (gamma < -70) {
              currentColumn = 1;
              document.getElementById("block").className = `column-${currentColumn}`;
            }
            
            if (gamma > -70 && gamma < 70) {
              currentColumn = 2;
              document.getElementById("block").className = `column-${currentColumn}`;
            }
            
            if (gamma > 70) {
              currentColumn = 3;
              document.getElementById("block").className = `column-${currentColumn}`;
            }

            document.getElementById("current-column").textContent = `${currentColumn}`;
          });
        }
    });
}
    </script>
</head>
<body>
  <div id="centralise">
    <a class="link" href="../../index.html">Click to return to OS selection menu</a>
    <button id="accelerometer-permissions" onclick="getMotionPermissions()"> Click to get accelerometer permissions</button>
    <div id="container">
      <div id="block" class="column-2">
      </div>
    </div>
    <div class="readouts">
      <span>Gamma: <span id="gamma">N/A</span></span>
      <span>Beta: <span id="beta">N/A</span></span>
      <span>Current Column: <span id="current-column">2</span>
    </div>
  </div>
</body>
</html>